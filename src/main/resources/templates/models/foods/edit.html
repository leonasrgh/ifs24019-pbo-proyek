<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <!-- Modal Fragment -->
    <div th:fragment="modal">
      <div
        class="modal fade"
        id="editFoodModal"
        tabindex="-1"
        aria-labelledby="editFoodModalLabel"
        aria-hidden="true"
        th:classappend="${editFoodModalOpen} ? 'show d-block' : ''"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <form
              th:action="@{/foods/edit}"
              method="post"
              th:object="${foodForm}"
            >
              <!-- Hidden ID -->
              <input type="hidden" name="id" th:field="*{id}" />

              <!-- Modal Header -->
              <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title" id="editFoodModalLabel">
                  ‚úèÔ∏è Edit Makanan
                </h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>

              <!-- Modal Body -->
              <div class="modal-body">
                <div class="row g-3">
                  <!-- Nama Makanan -->
                  <div class="col-md-6">
                    <label for="editName" class="form-label"
                      >Nama Makanan <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editName"
                      name="name"
                      th:field="*{name}"
                      required
                    />
                  </div>

                  <!-- Kategori -->
                  <div class="col-md-6">
                    <label for="editCategory" class="form-label"
                      >Kategori <span class="text-danger">*</span></label
                    >
                    <select
                      class="form-select"
                      id="editCategory"
                      name="category"
                      th:field="*{category}"
                      required
                    >
                      <option value="">Pilih Kategori</option>
                      <option value="Buah">üçé Buah</option>
                      <option value="Sayuran">ü•ó Sayuran</option>
                      <option value="Protein">üçó Protein</option>
                      <option value="Karbohidrat">üçö Karbohidrat</option>
                      <option value="Lemak Sehat">ü•ë Lemak Sehat</option>
                    </select>
                  </div>

                  <!-- Ukuran Porsi -->
                  <div class="col-md-6">
                    <label for="editServingSize" class="form-label"
                      >Ukuran Porsi <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editServingSize"
                      name="servingSize"
                      th:field="*{servingSize}"
                      required
                    />
                  </div>

                  <!-- Kalori -->
                  <div class="col-md-6">
                    <label for="editCalories" class="form-label"
                      >Kalori (kcal) <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editCalories"
                      name="calories"
                      th:field="*{calories}"
                      step="0.1"
                      min="0"
                      required
                    />
                  </div>

                  <!-- Protein -->
                  <div class="col-md-3">
                    <label for="editProtein" class="form-label"
                      >Protein (g) <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editProtein"
                      name="protein"
                      th:field="*{protein}"
                      step="0.1"
                      min="0"
                      required
                    />
                  </div>

                  <!-- Karbohidrat -->
                  <div class="col-md-3">
                    <label for="editCarbohydrates" class="form-label"
                      >Karbo (g) <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editCarbohydrates"
                      name="carbohydrates"
                      th:field="*{carbohydrates}"
                      step="0.1"
                      min="0"
                      required
                    />
                  </div>

                  <!-- Lemak -->
                  <div class="col-md-3">
                    <label for="editFat" class="form-label"
                      >Lemak (g) <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editFat"
                      name="fat"
                      th:field="*{fat}"
                      step="0.1"
                      min="0"
                      required
                    />
                  </div>

                  <!-- Serat -->
                  <div class="col-md-3">
                    <label for="editFiber" class="form-label"
                      >Serat (g) <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editFiber"
                      name="fiber"
                      th:field="*{fiber}"
                      step="0.1"
                      min="0"
                      required
                    />
                  </div>

                  <!-- Deskripsi -->
                  <div class="col-12">
                    <label for="editDescription" class="form-label"
                      >Deskripsi (Opsional)</label
                    >
                    <textarea
                      class="form-control"
                      id="editDescription"
                      name="description"
                      th:field="*{description}"
                      rows="3"
                    ></textarea>
                  </div>
                </div>
              </div>

              <!-- Modal Footer -->
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Batal
                </button>
                <button type="submit" class="btn btn-warning">
                  ‚úèÔ∏è Simpan Perubahan
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Script untuk auto-show modal -->
      <script th:inline="javascript">
        /*<![CDATA[*/
        const editModalOpen = /*[[${editFoodModalOpen}]]*/ false;
        if (editModalOpen) {
          const editModal = new bootstrap.Modal(
            document.getElementById("editFoodModal")
          );
          editModal.show();
        }
        /*]]>*/
      </script>
    </div>
  </body>
</html>